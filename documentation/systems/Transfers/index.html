<!DOCTYPE html><html><head><meta charset="UTF-8"><link media="screen,projection" href="../../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet"></link><link href="../../../contrib/katex/katex.min.css" type="text/css" rel="stylesheet"></link><link href="../../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../../css/moose.css" type="text/css" rel="stylesheet"></link><script src="../../../contrib/jquery/jquery.min.js" type="text/javascript"></script><script src="../../../contrib/materialize/materialize.min.js" type="text/javascript"></script><script src="../../../contrib/clipboard/clipboard.min.js" type="text/javascript"></script><script src="../../../contrib/prism/prism.min.js" type="text/javascript"></script><script src="../../../contrib/katex/katex.min.js" type="text/javascript"></script><script src="../../../contrib/fuse/fuse.min.js" type="text/javascript"></script><script src="../../../js/search_index.js" type="text/javascript"></script><script src="../../../js/init.js" type="text/javascript"></script><title>Transfers   System|Numbat</title></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="https://github.com/cpgr/numbat" class="right"><img src="../../../media/github-logo.png" class="github-mark"></img><img src="../../../media/github-mark.png" class="github-logo"></img></a><a href="http://cpgr.github.io/numbat/" class="left moose-logo">Numbat</a><ul class="right hide-on-med-and-down" id="nav-mobile"><li><a data-constrainWidth="false" href="#!" class="dropdown-button" data-activates="6bbfa073-82d7-46e2-ac4d-99f8457838d9">Getting Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a data-constrainWidth="false" href="#!" class="dropdown-button" data-activates="09a7a034-d938-4322-a9f7-f5102a298200">Theory<i class="material-icons right">arrow_drop_down</i></a></li><li><a data-constrainWidth="false" href="#!" class="dropdown-button" data-activates="c298392d-1d00-4514-a4b1-89a1ff63256e">Details<i class="material-icons right">arrow_drop_down</i></a></li><li><a data-constrainWidth="false" href="#!" class="dropdown-button" data-activates="c12c9bd3-d0c5-4ecd-8f90-f388326cef80">Examples<i class="material-icons right">arrow_drop_down</i></a></li><li><a data-constrainWidth="false" href="#!" class="dropdown-button" data-activates="5e842e5e-2e9d-4e5a-b075-92e245f6976f">Manual<i class="material-icons right">arrow_drop_down</i></a></li></ul><ul class="dropdown-content" id="6bbfa073-82d7-46e2-ac4d-99f8457838d9"><li><a href="../../../getting_started.html">Installation</a></li></ul><ul class="dropdown-content" id="09a7a034-d938-4322-a9f7-f5102a298200"><li><a href="../../../introduction.html">Introduction</a></li><li><a href="../../../governing_equations.html">Governing equations</a></li></ul><ul class="dropdown-content" id="c298392d-1d00-4514-a4b1-89a1ff63256e"><li><a href="../../../implementation.html">Implementation</a></li><li><a href="../../../input_file_syntax.html">Input file syntax</a></li><li><a href="../../../running_numbat.html">Running Numbat</a></li><li><a href="../../../systems.html">Available objects</a></li></ul><ul class="dropdown-content" id="c12c9bd3-d0c5-4ecd-8f90-f388326cef80"><li><a href="../../../example2D.html">2D</a></li><li><a href="../../../example3D.html">3D</a></li></ul><ul class="dropdown-content" id="5e842e5e-2e9d-4e5a-b075-92e245f6976f"><li><a href="../../../download.html">User manual</a></li></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input autocomplete="off" onkeyup="mooseSearch()" type="text" id="moose-search-box"><label for="search">http://cpgr.github.io/numbat/</label></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-action modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><span class="breadcrumb">documentation</span><a href=".." class="breadcrumb">systems</a><a href="." class="breadcrumb">Transfers</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><section data-section-text="Transfers   System" data-section-level="1" id="11cb6668-1ba3-43f2-873b-198f260380d3"><h1>Transfers System</h1><p>When running simulations that contain <a class="tooltipped" href="systems/MultiApps/index.md" data-tooltip="systems/MultiApps/index.md" data-position="top">MultiApps</a>&mdash;simulations running other sub-simulations&mdash;it is often required to move data to and from the sub-applications. Transfer objects in <a class="tooltipped" href="http://www.mooseframework.org" data-tooltip="http://www.mooseframework.org" data-position="top">MOOSE</a> are designed for this purpose.</p><div class="card moose-alert moose-alert-note"><div class="card-content"><div class="moose-alert-title card-title"><span class="moose-alert-title-brand">note</span></div><div class="moose-alert-content"><p>Prior to understanding Transfers it is important to grasp the idea of <a class="tooltipped" href="systems/MultiApps/index.md" data-tooltip="systems/MultiApps/index.md" data-position="top">MultiApps</a> first, so please refer to the <a class="tooltipped" href="systems/MultiApps/index.md" data-tooltip="systems/MultiApps/index.md" data-position="top">MultiApps</a> documentation for additional information.</p></div></div></div><section class="section scrollspy" data-section-text="Example   Transfer" data-section-level="2" id="52f1ea4b-4b57-4935-bb52-06d5145f4a0e"><h2>Example Transfer</h2><p>Assuming that the concept of <a class="tooltipped" href="systems/MultiApps/index.md" data-tooltip="systems/MultiApps/index.md" data-position="top">MultiApps</a> is understood, Transfers are best understood via an example problem. First, consider a "master" simulation that is solving the transient diffusion equation. This master simulation also includes two "sub" applications that rely on the average value of the unknown from the master application.</p><section data-section-text="The   " master "   Simulation" data-section-level="3" id="1586b6fc-7d39-4661-9b10-a61243731fb3"><h3>The "master" Simulation</h3><p><a class="tooltipped" href="#transfers-master-multiapps" data-tooltip="#transfers-master-multiapps" data-position="top">Listing 1</a> is an input file snippet showing the <a class="tooltipped" href="systems/MultiApps/index.md" data-tooltip="systems/MultiApps/index.md" data-position="top">MultiApps</a> block that includes a <a data-position="top" href="../MultiApps/TransientMultiApp.html" class="tooltipped" data-tooltip="../MultiApps/TransientMultiApp.html">TransientMultiApp</a>, this sub-application will execute along with the master (at the end of each timestep) as time progresses.</p><div class="card"><div class="card-content"><p class="moose-caption"><span class="moose-caption-heading">Listing 1: </span><span class="moose-caption-text">The <a class="tooltipped" href="systems/MultiApps/index.md" data-tooltip="systems/MultiApps/index.md" data-position="top">MultiApps</a> block of the "master" application that contains two sub-application that solves along with the master as time progresses.</span></p><pre style="max-height:350px;"><code class="language-text">
[MultiApps]
  [./pp_sub]
    type = TransientMultiApp
    app_type = MooseTestApp
    positions = '0.5 0.5 0 0.7 0.7 0'
    execute_on = timestep_end
    input_files = sub.i
  [../]
[]</code></pre><a data-position="top" href="#d6630a53-9669-4dc8-9c0b-c8750cd92f19" class="tooltipped modal-trigger" data-tooltip="/Users/gre462/Documents/MOOSE/projects/moose/test/tests/transfers/multiapp_postprocessor_to_scalar/master.i">(../moose/test/tests/transfers/multiapp_postprocessor_to_scalar/master.i)</a></div></div><p>For this example, the sub-applications require that the average from the master in the form of a scalar AuxVariable, see the <a class="tooltipped" href="systems/AuxVariables/index.md" data-tooltip="systems/AuxVariables/index.md" data-position="top">AuxVariables</a> documentation for further information. Therefore the master will transfer the average value (computed via the <a data-position="top" href="../Postprocessors/ElementAverageValue.html" class="tooltipped" data-tooltip="../Postprocessors/ElementAverageValue.html">ElementAverageValue</a> Postprocessor) to a scalar AuxVariable on each sub-application. As shown in <a class="tooltipped" href="#transfers-master-transfers" data-tooltip="#transfers-master-transfers" data-position="top">Listing 2</a>, the <a data-position="top" href="MultiAppPostprocessorToAuxScalarTransfer.html" class="tooltipped" data-tooltip="MultiAppPostprocessorToAuxScalarTransfer.html">MultiAppPostprocessorToAuxScalarTransfer</a> is provided for this purpose.</p><div class="card"><div class="card-content"><p class="moose-caption"><span class="moose-caption-heading">Listing 2: </span><span class="moose-caption-text">The Transfers block of the "master" application that contains a Transfer of a Postprocessor to a scalar AuxVariable on sub-applications.</span></p><pre style="max-height:350px;"><code class="language-text">
[Transfers]
  [./pp_transfer]
    type = MultiAppPostprocessorToAuxScalarTransfer
    direction = to_multiapp
    multi_app = pp_sub
    from_postprocessor = average
    to_aux_scalar = from_master_app
  [../]
[]</code></pre><a data-position="top" href="#6e62d746-9bfe-4fa0-8706-b924d4ba1bcf" class="tooltipped modal-trigger" data-tooltip="/Users/gre462/Documents/MOOSE/projects/moose/test/tests/transfers/multiapp_postprocessor_to_scalar/master.i">(../moose/test/tests/transfers/multiapp_postprocessor_to_scalar/master.i)</a></div></div></section><section data-section-text="The   " sub "   Simulations" data-section-level="3" id="277a0c24-fab1-4003-a8f8-72aa69972318"><h3>The "sub" Simulations</h3><p>For this simple example the sub-application must contain an appropriate AuxVariable to receiving the Postprocessor value from the master application.</p><div class="card"><div class="card-content"><p class="moose-caption"><span class="moose-caption-heading">Listing 3: </span><span class="moose-caption-text">The AuxVariables block of the "sub" application that contains a scalar that the master application will update.</span></p><pre style="max-height:350px;"><code class="language-text">
[AuxVariables]
  [./from_master_app]
    order = FIRST
    family = SCALAR
  [../]
[]</code></pre><a data-position="top" href="#6008d9e6-88c1-407a-a668-7bce5803f90b" class="tooltipped modal-trigger" data-tooltip="/Users/gre462/Documents/MOOSE/projects/moose/test/tests/transfers/multiapp_postprocessor_to_scalar/sub.i">(../moose/test/tests/transfers/multiapp_postprocessor_to_scalar/sub.i)</a></div></div><p>The sub-applications do not have any "knowledge" of the master application, and simply perform calculations that utilize the scalar variable, regardless of how this scalar is computed. This approach allows the sub-application input file to run in union of independent from the master without modification, which is useful for development and testing.</p></section></section><section class="section scrollspy" data-section-text="Available   Transfer   Objects" data-section-level="2" id="9081da97-8b03-4870-b7e3-30d497d3c3bc"><h2>Available Transfer Objects</h2><p>The following is a complete list of the available Transfer objects, each links to a page with further details.</p><ul class="collection with-header"><li class="moose-syntax-objects collection-item"><a href="MultiAppCopyTransfer.html" class="moose-syntax-objects-name">MultiAppCopyTransfer</a><span class="moose-syntax-objects-description">Copies variables (nonlinear and auxiliary) between multiapps that have identical meshes.</span></li><li class="moose-syntax-objects collection-item"><a href="MultiAppInterpolationTransfer.html" class="moose-syntax-objects-name">MultiAppInterpolationTransfer</a><span class="moose-syntax-objects-description">Transfers the value to the target domain from the nearest node in the source domain.</span></li><li class="moose-syntax-objects collection-item"><a href="MultiAppMeshFunctionTransfer.html" class="moose-syntax-objects-name">MultiAppMeshFunctionTransfer</a></li><li class="moose-syntax-objects collection-item"><a href="MultiAppNearestNodeTransfer.html" class="moose-syntax-objects-name">MultiAppNearestNodeTransfer</a></li><li class="moose-syntax-objects collection-item"><a href="MultiAppPostprocessorInterpolationTransfer.html" class="moose-syntax-objects-name">MultiAppPostprocessorInterpolationTransfer</a></li><li class="moose-syntax-objects collection-item"><a href="MultiAppPostprocessorToAuxScalarTransfer.html" class="moose-syntax-objects-name">MultiAppPostprocessorToAuxScalarTransfer</a></li><li class="moose-syntax-objects collection-item"><a href="MultiAppPostprocessorTransfer.html" class="moose-syntax-objects-name">MultiAppPostprocessorTransfer</a></li><li class="moose-syntax-objects collection-item"><a href="MultiAppProjectionTransfer.html" class="moose-syntax-objects-name">MultiAppProjectionTransfer</a></li><li class="moose-syntax-objects collection-item"><a href="MultiAppScalarToAuxScalarTransfer.html" class="moose-syntax-objects-name">MultiAppScalarToAuxScalarTransfer</a></li><li class="moose-syntax-objects collection-item"><a href="MultiAppUserObjectTransfer.html" class="moose-syntax-objects-name">MultiAppUserObjectTransfer</a></li><li class="moose-syntax-objects collection-item"><a href="MultiAppVariableValueSamplePostprocessorTransfer.html" class="moose-syntax-objects-name">MultiAppVariableValueSamplePostprocessorTransfer</a></li><li class="moose-syntax-objects collection-item"><a href="MultiAppVariableValueSampleTransfer.html" class="moose-syntax-objects-name">MultiAppVariableValueSampleTransfer</a></li><li class="moose-syntax-objects collection-item"><a href="MultiAppVectorPostprocessorTransfer.html" class="moose-syntax-objects-name">MultiAppVectorPostprocessorTransfer</a><span class="moose-syntax-objects-description">This transfer distributes the N values of a VectorPostprocessor to Postprocessors located in N sub-apps or collects Postprocessor values from N sub-apps into a VectorPostprocessor</span></li></ul><ul class="collection with-header"><li class="moose-syntax-actions collection-item"><a href="AddTransferAction.html" class="moose-syntax-actions-name">AddTransferAction</a></li></ul></section></section></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"><li><a data-delay="1000" data-position="left" href="#52f1ea4b-4b57-4935-bb52-06d5145f4a0e" class="tooltipped" data-tooltip="Example   Transfer">Example   Transfer</a></li><li><a data-delay="1000" data-position="left" href="#9081da97-8b03-4870-b7e3-30d497d3c3bc" class="tooltipped" data-tooltip="Available   Transfer   Objects">Available   Transfer   Objects</a></li></ul></div></div></div></div></main></div><div id="d6630a53-9669-4dc8-9c0b-c8750cd92f19" class="modal bottom-sheet"><div class="modal-content"><h4>/Users/gre462/Documents/MOOSE/projects/moose/test/tests/transfers/multiapp_postprocessor_to_scalar/master.i</h4><pre><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[Variables]
  [./u]
  [../]
[]

[Kernels]
  [./diff]
    type = CoefDiffusion
    variable = u
    coef = 0.01
  [../]
  [./td]
    type = TimeDerivative
    variable = u
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  [../]
  [./right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  [../]
[]

[Postprocessors]
  [./average]
    type = ElementAverageValue
    variable = u
  [../]
[]

[Executioner]
  type = Transient
  solve_type = 'PJFNK'
  num_steps = 5
  petsc_options_iname = '-pc_type -pc_hypre_type'
  petsc_options_value = 'hypre boomeramg'

  nl_rel_tol = 1e-12
[]

[Outputs]
  exodus = true
[]

[MultiApps]
  [./pp_sub]
    type = TransientMultiApp
    app_type = MooseTestApp
    positions = '0.5 0.5 0 0.7 0.7 0'
    execute_on = timestep_end
    input_files = sub.i
  [../]
[]

[Transfers]
  [./pp_transfer]
    type = MultiAppPostprocessorToAuxScalarTransfer
    direction = to_multiapp
    multi_app = pp_sub
    from_postprocessor = average
    to_aux_scalar = from_master_app
  [../]
[]
</code></pre></div></div><div id="6e62d746-9bfe-4fa0-8706-b924d4ba1bcf" class="modal bottom-sheet"><div class="modal-content"><h4>/Users/gre462/Documents/MOOSE/projects/moose/test/tests/transfers/multiapp_postprocessor_to_scalar/master.i</h4><pre><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[Variables]
  [./u]
  [../]
[]

[Kernels]
  [./diff]
    type = CoefDiffusion
    variable = u
    coef = 0.01
  [../]
  [./td]
    type = TimeDerivative
    variable = u
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  [../]
  [./right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 1
  [../]
[]

[Postprocessors]
  [./average]
    type = ElementAverageValue
    variable = u
  [../]
[]

[Executioner]
  type = Transient
  solve_type = 'PJFNK'
  num_steps = 5
  petsc_options_iname = '-pc_type -pc_hypre_type'
  petsc_options_value = 'hypre boomeramg'

  nl_rel_tol = 1e-12
[]

[Outputs]
  exodus = true
[]

[MultiApps]
  [./pp_sub]
    type = TransientMultiApp
    app_type = MooseTestApp
    positions = '0.5 0.5 0 0.7 0.7 0'
    execute_on = timestep_end
    input_files = sub.i
  [../]
[]

[Transfers]
  [./pp_transfer]
    type = MultiAppPostprocessorToAuxScalarTransfer
    direction = to_multiapp
    multi_app = pp_sub
    from_postprocessor = average
    to_aux_scalar = from_master_app
  [../]
[]
</code></pre></div></div><div id="6008d9e6-88c1-407a-a668-7bce5803f90b" class="modal bottom-sheet"><div class="modal-content"><h4>/Users/gre462/Documents/MOOSE/projects/moose/test/tests/transfers/multiapp_postprocessor_to_scalar/sub.i</h4><pre><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 10
  ny = 10
[]

[Variables]
  [./u]
  [../]
[]

[AuxVariables]
  [./from_master_app]
    order = FIRST
    family = SCALAR
  [../]
[]

[Kernels]
  [./diff]
    type = CoefDiffusion
    variable = u
    coef = 0.01
  [../]
  [./td]
    type = TimeDerivative
    variable = u
  [../]
[]

[BCs]
  [./left]
    type = DirichletBC
    variable = u
    boundary = left
    value = 0
  [../]
  [./right]
    type = DirichletBC
    variable = u
    boundary = right
    value = 2
  [../]
[]

[Postprocessors]
  [./from_master]
    type = ScalarVariable
    variable = from_master_app
  [../]
[]

[Executioner]
  type = Transient
  solve_type = 'PJFNK'
  num_steps = 1
  dt = 1
  petsc_options_iname = '-pc_type -pc_hypre_type'
  petsc_options_value = 'hypre boomeramg'

  nl_rel_tol = 1e-12
[]

[Outputs]
  exodus = true
  hide = from_master_app
[]
</code></pre></div></div></body></html>