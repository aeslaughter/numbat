<!DOCTYPE html><html><head><meta charset="UTF-8"><link media="screen,projection" href="../../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet"></link><link href="../../../contrib/katex/katex.min.css" type="text/css" rel="stylesheet"></link><link href="../../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../../css/moose.css" type="text/css" rel="stylesheet"></link><script src="../../../contrib/jquery/jquery.min.js" type="text/javascript"></script><script src="../../../contrib/materialize/materialize.min.js" type="text/javascript"></script><script src="../../../contrib/clipboard/clipboard.min.js" type="text/javascript"></script><script src="../../../contrib/prism/prism.min.js" type="text/javascript"></script><script src="../../../contrib/katex/katex.min.js" type="text/javascript"></script><script src="../../../contrib/fuse/fuse.min.js" type="text/javascript"></script><script src="../../../js/search_index.js" type="text/javascript"></script><script src="../../../js/init.js" type="text/javascript"></script><title>Mesh   System|Numbat</title></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="https://github.com/cpgr/numbat" class="right"><img src="../../../media/github-logo.png" class="github-mark"></img><img src="../../../media/github-mark.png" class="github-logo"></img></a><a href="http://cpgr.github.io/numbat/" class="left moose-logo">Numbat</a><ul class="right hide-on-med-and-down" id="nav-mobile"><li><a data-constrainWidth="false" href="#!" class="dropdown-button" data-activates="77016205-541d-4842-b5a1-9b0c39d0c78d">Getting Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a data-constrainWidth="false" href="#!" class="dropdown-button" data-activates="8dc55285-83a4-461a-8a37-7b35d7c8eb99">Theory<i class="material-icons right">arrow_drop_down</i></a></li><li><a data-constrainWidth="false" href="#!" class="dropdown-button" data-activates="a632ed59-04d1-4329-9f23-062eb09ab6a2">Details<i class="material-icons right">arrow_drop_down</i></a></li><li><a data-constrainWidth="false" href="#!" class="dropdown-button" data-activates="4ac57cf5-0ebc-4f11-aa13-4d6c665e38b9">Examples<i class="material-icons right">arrow_drop_down</i></a></li><li><a data-constrainWidth="false" href="#!" class="dropdown-button" data-activates="f9c622e3-972f-4780-832f-dc36d7977f09">Manual<i class="material-icons right">arrow_drop_down</i></a></li></ul><ul class="dropdown-content" id="77016205-541d-4842-b5a1-9b0c39d0c78d"><li><a href="../../../getting_started.html">Installation</a></li></ul><ul class="dropdown-content" id="8dc55285-83a4-461a-8a37-7b35d7c8eb99"><li><a href="../../../introduction.html">Introduction</a></li><li><a href="../../../governing_equations.html">Governing equations</a></li></ul><ul class="dropdown-content" id="a632ed59-04d1-4329-9f23-062eb09ab6a2"><li><a href="../../../implementation.html">Implementation</a></li><li><a href="../../../input_file_syntax.html">Input file syntax</a></li><li><a href="../../../systems.html">Available objects</a></li></ul><ul class="dropdown-content" id="4ac57cf5-0ebc-4f11-aa13-4d6c665e38b9"><li><a href="../../../example2D.html">2D</a></li><li><a href="../../../example3D.html">3D</a></li></ul><ul class="dropdown-content" id="f9c622e3-972f-4780-832f-dc36d7977f09"><li><a href="../../../download.html">User manual</a></li></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input autocomplete="off" onkeyup="mooseSearch()" type="text" id="moose-search-box"><label for="search">http://cpgr.github.io/numbat/</label></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-action modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><span class="breadcrumb">documentation</span><a href=".." class="breadcrumb">systems</a><a href="." class="breadcrumb">Mesh</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><section data-section-text="Mesh   System" data-section-level="1" id="ad32dc36-d5b5-43f0-8a3b-f76e76971c1d"><h1>Mesh System</h1><section class="section scrollspy" data-section-text="Overview" data-section-level="2" id="0dc44f7b-71f8-4467-8783-c7fd995de3cb"><h2>Overview</h2><p>In general, MOOSE is not designed for generating finite element meshes. Generally, <a href="https://cubit.sandia.gov/" data-tooltip="https://cubit.sandia.gov/" data-position="top" class="tooltipped">CUBIT</a> from <a href="http://www.sandia.gov/" data-tooltip="http://www.sandia.gov/" data-position="top" class="tooltipped">Sandia National Laboratories</a> is recommended for creating meshes, especially complex geometries, for use in MOOSE. CUBIT can be licensed from CSimSoft for a fee depending that varies based on the type of organization and work being performed. Other mesh generators can work as long as they output a file format that is supported by the <a data-position="top" href="FileMesh.html" class="tooltipped" data-tooltip="FileMesh.html">FileMesh</a> object.</p></section><section class="section scrollspy" data-section-text="Example   Syntax   and   Mesh   Objects" data-section-level="2" id="61619b72-339f-43f1-a7eb-cfb7eced884a"><h2>Example Syntax and Mesh Objects</h2><p>Mesh settings are applied with the <code>[Mesh]</code> of the input files, for example the basic input file syntax for reading a file from a mesh is shown below. For additional information on the other types of Mesh objects refer to the individual object pages listed below.</p><div class="card"><div class="card-content"><pre style="max-height:350px;"><code class="language-text">[Mesh]
  type = FileMesh
  file = square.e
[]</code></pre><a data-position="top" href="#a18bc366-4c4b-43d8-b92b-965b8f843240" class="tooltipped modal-trigger" data-tooltip="/Users/gre462/Documents/MOOSE/projects/moose/test/tests/auxkernels/solution_aux/build.i">(../moose/test/tests/auxkernels/solution_aux/build.i)</a></div></div><ul class="collection with-header"><li class="moose-syntax-objects collection-item"><a href="AnnularMesh.html" class="moose-syntax-objects-name">AnnularMesh</a><span class="moose-syntax-objects-description">For rmin>0: creates an annular mesh of QUAD4 elements. For rmin=0: creates a disc mesh of QUAD4 and TRI3 elements. Boundary sidesets are created at rmax and rmin, and given these names. If tmin!<u>0 and tmax!</u>2Pi, a sector of an annulus or disc is created. In this case boundary sidesets are also created a tmin and tmax, and given these names</span></li><li class="moose-syntax-objects collection-item"><a href="DistributedGeneratedMesh.html" class="moose-syntax-objects-name">DistributedGeneratedMesh</a><span class="moose-syntax-objects-description">Create a line, square, or cube mesh with uniformly spaced or biased elements.</span></li><li class="moose-syntax-objects collection-item"><a href="FileMesh.html" class="moose-syntax-objects-name">FileMesh</a><span class="moose-syntax-objects-description">Read a mesh from a file.</span></li><li class="moose-syntax-objects collection-item"><a href="GeneratedMesh.html" class="moose-syntax-objects-name">GeneratedMesh</a><span class="moose-syntax-objects-description">Create a line, square, or cube mesh with uniformly spaced or biased elements.</span></li><li class="moose-syntax-objects collection-item"><a href="ImageMesh.html" class="moose-syntax-objects-name">ImageMesh</a><span class="moose-syntax-objects-description">Generated mesh with the aspect ratio of a given image stack.</span></li><li class="moose-syntax-objects collection-item"><a href="PatternedMesh.html" class="moose-syntax-objects-name">PatternedMesh</a><span class="moose-syntax-objects-description">Creates a 2D mesh from a specified set of unique 'tiles' meshes and a two-dimensional pattern.</span></li><li class="moose-syntax-objects collection-item"><a href="StitchedMesh.html" class="moose-syntax-objects-name">StitchedMesh</a><span class="moose-syntax-objects-description">Reads in all of the given meshes and stitches them all together into one mesh.</span></li><li class="moose-syntax-objects collection-item"><a href="TiledMesh.html" class="moose-syntax-objects-name">TiledMesh</a><span class="moose-syntax-objects-description">Use the supplied mesh and create a tiled grid by repeating this mesh in the x,y, and z directions.</span></li><li class="moose-syntax-objects collection-item"><a href="NumbatBiasedMesh.html" class="moose-syntax-objects-name">NumbatBiasedMesh</a><span class="moose-syntax-objects-description">Generates a regular orthogonal mesh with a bias of specified initial resolution at a specified edge</span></li></ul><ul class="collection with-header"><li class="moose-syntax-subsystems collection-item"><a href="MortarInterfaces/index.html" class="moose-syntax-subsystems-name">MortarInterfaces</a></li><li class="moose-syntax-subsystems collection-item"><a href="Partitioner/index.html" class="moose-syntax-subsystems-name">Partitioner</a></li></ul><ul class="collection with-header"><li class="moose-syntax-actions collection-item"><a href="CreateDisplacedProblemAction.html" class="moose-syntax-actions-name">CreateDisplacedProblemAction</a></li><li class="moose-syntax-actions collection-item"><a href="SetupMeshAction.html" class="moose-syntax-actions-name">SetupMeshAction</a></li><li class="moose-syntax-actions collection-item"><a href="SetupMeshCompleteAction.html" class="moose-syntax-actions-name">SetupMeshCompleteAction</a></li></ul></section><section class="section scrollspy" data-section-text="Named   Entity   Support" data-section-level="2" id="f26f51b3-013e-42e9-9a44-07c7646c6c53"><h2>Named Entity Support</h2><p>Human-readable names can be assigned to blocks, sidesets, and nodesets. These names will be automatically read in and can be used throughout the input file. Mesh generators such as CUBIT will generally provide the capability internally. Any parameter that takes entity IDs in the input file will accept either numbers or "names". Names can also be assigned to IDs on-the-fly in existing meshes to ease input file maintenance (see example). On-the-fly names will also be written to Exodus/XDA/XDR files. An illustration for mesh in exodus file format.</p><div class="card"><div class="card-content"><pre style="max-height:350px;"><code class="language-text">[Mesh]
  file = three_block.e

  # These names will be applied on the fly to the
  # mesh so that they can be used in the input file
  # In addition they will show up in the output file
  block_id = '1 2 3'
  block_name = 'wood steel copper'

  boundary_id = '1 2'
  boundary_name = 'left right'
[]</code></pre><a data-position="top" href="#e3e36067-30a0-4066-811a-2267b57d04ca" class="tooltipped modal-trigger" data-tooltip="/Users/gre462/Documents/MOOSE/projects/moose/test/tests/mesh/named_entities/name_on_the_fly.i">(../moose/test/tests/mesh/named_entities/name_on_the_fly.i)</a></div></div></section><section class="section scrollspy" data-section-text="Replicated   and   Distributed   Mesh" data-section-level="2" id="a1d3fcda-3585-4e8e-a49b-e875659c1d44"><h2 id="replicated-and-distributed-mesh">Replicated and Distributed Mesh</h2><p>The core of the mesh capabilities are derived from <a class="tooltipped" href="http://libmesh.github.io/" data-tooltip="http://libmesh.github.io/" data-position="top">libMesh</a>, which has two underlying parallel mesh formats: "replicated" and "distributed".</p><p>The replicated mesh format is the default format for MOOSE and is the most appropriate format to utilize for nearly all simulations. In parallel, the replicated format copies the complete mesh to all processors allowing for efficient access to the geometry elements.</p><p>The distributed mesh format is useful when the mesh data structure dominates memory usage. Only the pieces of the mesh "owned" by a processor are actually stored on the processor. If the mesh is too large to read in on a single processor, it can be split prior to the simulation.</p><div class="card moose-alert moose-alert-note"><div class="card-content"><div class="moose-alert-title card-title"><span class="moose-alert-title-brand">note</span></div><div class="moose-alert-content"><p>Both the "replicated" and "distributed" mesh formats are parallel with respect to the execution of the finite element assembly and solve. In both types the solution data is distributed, which is the portion of the simulation that usually dominates memory demands.</p></div></div></div></section><section class="section scrollspy" data-section-text="Mesh   splitting" data-section-level="2" id="f5ed7ef4-c461-414a-aaed-b0bfe35658b7"><h2>Mesh splitting</h2><p>For large meshes, MOOSE provides the ability to pre-split a mesh for use in the the "distributed" format/mode. To split and use a mesh for distributed runs:</p><pre><code class="language-text">
// For input files with a file-based mesh:
$ moose-app-opt -i your_input-file.i --split-mesh 500,1000,2000 // comma-separated list of split configurations
Splitting 500 ways...
    - writing 500 files per process...
Splitting 1000 ways...
    - writing 1000 files per process...
...

// MOOSE automatically selects the pre-split mesh configuration based on MPI procs
$ mpiexec -n 1000 moose-app-opt -i your_input-file.i --use-split
</code></pre><p>For more details see "<a data-position="top" href="splitting.html" class="tooltipped" data-tooltip="splitting.html">Mesh Splitting</a>".</p></section><section class="section scrollspy" data-section-text="Displaced   Mesh" data-section-level="2" id="333afde3-25a2-42cb-b6c8-450ff920ecc9"><h2>Displaced Mesh</h2><p>Calculations can take place in either the initial mesh configuration or, when requested, the "displaced" configuration. To enable displacements, provide a vector of displacement variable names for each spatial dimension in the 'displacements' parameters within the Mesh block.</p><div class="card"><div class="card-content"><pre style="max-height:350px;"><code class="language-text">
[Mesh]
  type = FileMesh
  file = truss_2d.e
  displacements = 'disp_x disp_y'
[]</code></pre><a data-position="top" href="#f0fd2540-9a13-4da0-a702-3080f33ce2f9" class="tooltipped modal-trigger" data-tooltip="/Users/gre462/Documents/MOOSE/projects/moose/modules/tensor_mechanics/test/tests/truss/truss_2d.i">(../moose/modules/tensor_mechanics/test/tests/truss/truss_2d.i)</a></div></div><p>Once enabled, the any object that should operate on the displaced configuration should set the "use_displaced_mesh" to true. For example, the following snippet enables the computation of a <a data-position="top" href="../Postprocessors/index.html" class="tooltipped" data-tooltip="../Postprocessors/index.html">Postprocessor</a> with and without the displaced configuration.</p><div class="card"><div class="card-content"><pre style="max-height:350px;"><code class="language-text">
[Postprocessors]
  [./without]
    type = ElementIntegralVariablePostprocessor
    variable = c
    execute_on = initial
  [../]
  [./with]
    type = ElementIntegralVariablePostprocessor
    variable = c
    use_displaced_mesh = true
    execute_on = initial
  [../]
[]</code></pre><a data-position="top" href="#a918c841-db54-4d44-9903-90050a582694" class="tooltipped modal-trigger" data-tooltip="/Users/gre462/Documents/MOOSE/projects/moose/test/tests/postprocessors/displaced_mesh/elemental.i">(../moose/test/tests/postprocessors/displaced_mesh/elemental.i)</a></div></div></section></section></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"><li><a data-delay="1000" data-position="left" href="#0dc44f7b-71f8-4467-8783-c7fd995de3cb" class="tooltipped" data-tooltip="Overview">Overview</a></li><li><a data-delay="1000" data-position="left" href="#61619b72-339f-43f1-a7eb-cfb7eced884a" class="tooltipped" data-tooltip="Example   Syntax   and   Mesh   Objects">Example   Syntax   and   Mesh   Objects</a></li><li><a data-delay="1000" data-position="left" href="#f26f51b3-013e-42e9-9a44-07c7646c6c53" class="tooltipped" data-tooltip="Named   Entity   Support">Named   Entity   Support</a></li><li><a data-delay="1000" data-position="left" href="#a1d3fcda-3585-4e8e-a49b-e875659c1d44" class="tooltipped" data-tooltip="Replicated   and   Distributed   Mesh">Replicated   and   Distributed   Mesh</a></li><li><a data-delay="1000" data-position="left" href="#f5ed7ef4-c461-414a-aaed-b0bfe35658b7" class="tooltipped" data-tooltip="Mesh   splitting">Mesh   splitting</a></li><li><a data-delay="1000" data-position="left" href="#333afde3-25a2-42cb-b6c8-450ff920ecc9" class="tooltipped" data-tooltip="Displaced   Mesh">Displaced   Mesh</a></li></ul></div></div></div></div></main></div><div id="a18bc366-4c4b-43d8-b92b-965b8f843240" class="modal bottom-sheet"><div class="modal-content"><h4>/Users/gre462/Documents/MOOSE/projects/moose/test/tests/auxkernels/solution_aux/build.i</h4><pre><code class="language-text">[Mesh]
  type = FileMesh
  file = square.e
[]

[Variables]
  [./u]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Kernels]
  [./diff]
    type = Diffusion
    variable = u
  [../]
[]


[BCs]
  [./left]
    type = DirichletBC
    variable = u
    boundary = 1
    value = 2
  [../]
  [./right]
    type = DirichletBC
    variable = u
    boundary = 2
    value = 3
  [../]
[]

[Executioner]
  type = Steady
  solve_type = 'PJFNK'
  nl_rel_tol = 1e-10
[]

[Outputs]
  exodus = true
  xda = true
[]
</code></pre></div></div><div id="e3e36067-30a0-4066-811a-2267b57d04ca" class="modal bottom-sheet"><div class="modal-content"><h4>/Users/gre462/Documents/MOOSE/projects/moose/test/tests/mesh/named_entities/name_on_the_fly.i</h4><pre><code class="language-text">[Mesh]
  file = three_block.e

  # These names will be applied on the fly to the
  # mesh so that they can be used in the input file
  # In addition they will show up in the output file
  block_id = '1 2 3'
  block_name = 'wood steel copper'

  boundary_id = '1 2'
  boundary_name = 'left right'
[]

[Variables]
  active = 'u'

  [./u]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Kernels]
  active = 'diff'

  [./diff]
    type = Diffusion
    variable = u
  [../]
[]

[BCs]
  active = 'left right'

  [./left]
    type = DirichletBC
    variable = u
    boundary = 'left'
    value = 0
  [../]

  [./right]
    type = DirichletBC
    variable = u
    boundary = 'right'
    value = 1
  [../]
[]

[Materials]
  active = empty

  [./empty]
    type = MTMaterial
    block = 'wood steel copper'
  [../]
[]

[Executioner]
  type = Steady

  solve_type = 'PJFNK'
[]

[Outputs]
  exodus = true
[]
</code></pre></div></div><div id="f0fd2540-9a13-4da0-a702-3080f33ce2f9" class="modal bottom-sheet"><div class="modal-content"><h4>/Users/gre462/Documents/MOOSE/projects/moose/modules/tensor_mechanics/test/tests/truss/truss_2d.i</h4><pre><code class="language-text">#
# Truss in two dimensional space
#
# The truss is made of five equilateral triangles supported at each end.
# The truss starts at (0,0).  At (1,0), there is a point load of 25.
# The reactions are therefore
#  Ryleft  = 2/3 * 25 = 16.7
#  Ryright = 1/3 * 25 = 8.33
# The area of each member is 0.8.
# Statics gives the stress in each member.  For example, for element 6 (from
#   (0,0) to (1/2,sqrt(3)/2)), the force is
#   f = 2/3 * 25 * 2/sqrt(3) = 100/3/sqrt(3) (compressive)
#   and the stress is
#   s = -100/3/sqrt(3)/0.8 = -24.06
#

[Mesh]
  type = FileMesh
  file = truss_2d.e
  displacements = 'disp_x disp_y'
[]

[Variables]
  [./disp_x]
    order = FIRST
    family = LAGRANGE
  [../]
  [./disp_y]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[AuxVariables]
  [./axial_stress]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./e_over_l]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./area]
    order = CONSTANT
    family = MONOMIAL
#    initial_condition = 1.0
  [../]
  [./react_x]
    order = FIRST
    family = LAGRANGE
  [../]
  [./react_y]
    order = FIRST
    family = LAGRANGE
  [../]
  [./react_z]
    order = FIRST
    family = LAGRANGE
  [../]
[]

[Functions]
  [./x2]
    type = PiecewiseLinear
    x = '0  1 2 3'
    y = '0 .5 1 1'
  [../]
  [./y2]
    type = PiecewiseLinear
    x = '0 1  2 3'
    y = '0 0 .5 1'
  [../]
[]

[BCs]
  [./fixx1]
    type = DirichletBC
    variable = disp_x
    boundary = 1
    value = 0
  [../]
  [./fixy1]
    type = DirichletBC
    variable = disp_y
    boundary = 1
    value = 0
  [../]

  [./fixy4]
    type = DirichletBC
    variable = disp_y
    boundary = 4
    value = 0
  [../]
[]

[DiracKernels]
  [./pull]
    type = ConstantPointSource
    value = -25
    point = '1 0 0'
    variable = disp_y
  [../]
[]

[AuxKernels]
  [./axial_stress]
    type = MaterialRealAux
    block = 1
    property = axial_stress
    variable = axial_stress
  [../]
  [./e_over_l]
    type = MaterialRealAux
    block = 1
    property = e_over_l
    variable = e_over_l
  [../]
  [./area]
    type = ConstantAux
    block = 1
    variable = area
    value = 0.8
    execute_on = 'initial timestep_begin'
  [../]
[]

[Preconditioning]
  [./SMP]
    type = SMP
    full = true
  [../]
[]

[Executioner]
  type = Transient

  solve_type = PJFNK

  petsc_options_iname = '-pc_type -ksp_gmres_restart'
  petsc_options_value = 'jacobi   101'

  nl_max_its = 15
  nl_rel_tol = 1e-8
  nl_abs_tol = 1e-10

  dt = 1
  num_steps = 1
  end_time = 1
[]

[Kernels]
  [./solid_x]
    type = StressDivergenceTensorsTruss
    block = 1
    displacements = 'disp_x disp_y'
    component = 0
    variable = disp_x
    area = area
    save_in = react_x
  [../]
  [./solid_y]
    type = StressDivergenceTensorsTruss
    block = 1
    displacements = 'disp_x disp_y'
    component = 1
    variable = disp_y
    area = area
    save_in = react_y
  [../]
[]

[Materials]
  [./linelast]
    type = LinearElasticTruss
    block = 1
    youngs_modulus = 1e6
    displacements = 'disp_x disp_y'
  [../]
[]

[Outputs]
  exodus = true
[]
</code></pre></div></div><div id="a918c841-db54-4d44-9903-90050a582694" class="modal bottom-sheet"><div class="modal-content"><h4>/Users/gre462/Documents/MOOSE/projects/moose/test/tests/postprocessors/displaced_mesh/elemental.i</h4><pre><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  nx = 2
  ny = 2
  displacements = 'ux uy'
[]

[AuxVariables]
  [./ux]
    [./InitialCondition]
      type = FunctionIC
      function = x
    [../]
  [../]
  [./uy]
    [./InitialCondition]
      type = FunctionIC
      function = y
    [../]
  [../]
  [./c]
    initial_condition = 1
  [../]
[]

[Variables]
  [./a]
  [../]
[]
[Kernels]
  [./a]
    type = Diffusion
    variable = a
  [../]
[]

[Postprocessors]
  [./without]
    type = ElementIntegralVariablePostprocessor
    variable = c
    execute_on = initial
  [../]
  [./with]
    type = ElementIntegralVariablePostprocessor
    variable = c
    use_displaced_mesh = true
    execute_on = initial
  [../]
[]

[Problem]
  solve = false
[]

[Executioner]
  type = Transient
  num_steps = 0
[]

[Outputs]
  [./out]
    type = Exodus
  [../]
[]
</code></pre></div></div></body></html>