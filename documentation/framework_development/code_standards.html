<!DOCTYPE html><html><head><meta charset="UTF-8"><link media="screen,projection" href="../../contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet"></link><link href="../../contrib/katex/katex.min.css" type="text/css" rel="stylesheet"></link><link href="../../contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="../../css/moose.css" type="text/css" rel="stylesheet"></link><script src="../../contrib/jquery/jquery.min.js" type="text/javascript"></script><script src="../../contrib/materialize/materialize.min.js" type="text/javascript"></script><script src="../../contrib/clipboard/clipboard.min.js" type="text/javascript"></script><script src="../../contrib/prism/prism.min.js" type="text/javascript"></script><script src="../../contrib/katex/katex.min.js" type="text/javascript"></script><script src="../../contrib/fuse/fuse.min.js" type="text/javascript"></script><script src="../../js/search_index.js" type="text/javascript"></script><script src="../../js/init.js" type="text/javascript"></script><title>File   Layout|Numbat</title></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="https://github.com/cpgr/numbat" class="right"><img src="../../media/github-logo.png" class="github-mark"></img><img src="../../media/github-mark.png" class="github-logo"></img></a><a href="http://cpgr.github.io/numbat/" class="left moose-logo">Numbat</a><ul class="right hide-on-med-and-down" id="nav-mobile"><li><a data-constrainWidth="false" href="#!" class="dropdown-button" data-activates="593e9ba9-1c3a-49c4-95b2-c039f2dc9e35">Getting Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a data-constrainWidth="false" href="#!" class="dropdown-button" data-activates="87243af9-5b0b-46a0-ba30-49d4887798cf">Theory<i class="material-icons right">arrow_drop_down</i></a></li><li><a data-constrainWidth="false" href="#!" class="dropdown-button" data-activates="976b238d-35a4-424f-b94d-4384352fe9ec">Details<i class="material-icons right">arrow_drop_down</i></a></li><li><a data-constrainWidth="false" href="#!" class="dropdown-button" data-activates="230db44f-9b13-4e1c-8ac3-39326019e7d7">Examples<i class="material-icons right">arrow_drop_down</i></a></li><li><a data-constrainWidth="false" href="#!" class="dropdown-button" data-activates="1dd3ac78-513d-4006-b26e-eece82cfa230">Manual<i class="material-icons right">arrow_drop_down</i></a></li></ul><ul class="dropdown-content" id="593e9ba9-1c3a-49c4-95b2-c039f2dc9e35"><li><a href="../../getting_started.html">Installation</a></li></ul><ul class="dropdown-content" id="87243af9-5b0b-46a0-ba30-49d4887798cf"><li><a href="../../introduction.html">Introduction</a></li><li><a href="../../governing_equations.html">Governing equations</a></li></ul><ul class="dropdown-content" id="976b238d-35a4-424f-b94d-4384352fe9ec"><li><a href="../../implementation.html">Implementation</a></li><li><a href="../../input_file_syntax.html">Input file syntax</a></li><li><a href="../../systems.html">Available objects</a></li></ul><ul class="dropdown-content" id="230db44f-9b13-4e1c-8ac3-39326019e7d7"><li><a href="../../example2D.html">2D</a></li><li><a href="../../example3D.html">3D</a></li></ul><ul class="dropdown-content" id="1dd3ac78-513d-4006-b26e-eece82cfa230"><li><a href="../../download.html">User manual</a></li></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input autocomplete="off" onkeyup="mooseSearch()" type="text" id="moose-search-box"><label for="search">http://cpgr.github.io/numbat/</label></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-action modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><span class="breadcrumb">documentation</span><a href="." class="breadcrumb">framework_development</a><a href="code_standards.html" class="breadcrumb">code_standards</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><p>We use <code>clang-format</code> (with a customized <a href="https://github.com/idaholab/moose/blob/devel/.clang-format" data-tooltip="https://github.com/idaholab/moose/blob/devel/.clang-format" data-position="top" class="tooltipped">config</a> file) for code formatting. If you have clang installed, you can run the following command to automatically format code changed between your current checked out branch and <code>&lt;branch&gt;</code> (if ommitted, defaults to HEAD).</p><pre><code class="language-text">
git clang-format [&lt;branch&gt;]
</code></pre><p>If you don't format your branch prior to pushing your code to the MOOSE repository, Our continuous integration pre-check will also print out a diff of changes you need to make to pull requests in order to conform with our coding style. Read our <a href="http://mooseframework.org/blog/using-our-new-clang-format-style/" data-tooltip="http://mooseframework.org/blog/using-our-new-clang-format-style/" data-position="top" class="tooltipped">blog post</a> for suggestions about automatically checking and formatting code with git and/or your text editor.</p><p><a href="---" data-tooltip="---" data-position="top" class="tooltipped"></a></p><p>General style guidelines include:</p><ul class="browser-default"><li><p> Single spacing around all binary operators </p></li><li><p> No spacing around unary operators </p></li><li><p> No spacing on the inside of brackets or parenthesis in expressions </p></li><li><p> Avoid braces for single statement control statements (i.e for, if, while, etc.) </p></li><li><p> C++ constructor spacing is demonstrated in the bottom of the example below</p></li></ul><p><a href="---" data-tooltip="---" data-position="top" class="tooltipped"></a></p><section data-section-text="File   Layout" data-section-level="1" id="a329e36c-a3c7-4aff-9f33-3f7888a96fb2"><h1>File Layout</h1><ul class="browser-default"><li><p>Header files should have a ".h" extension </p></li><li><p>Header files always go either into "include" or a sub-directory of "include" </p></li><li><p>C++ source files should have a ".C" extension </p></li><li><p>Source files go into "src" or a subdirectory of "src".</p></li></ul><p><a href="---" data-tooltip="---" data-position="top" class="tooltipped"></a></p></section><section data-section-text="Files" data-section-level="1" id="83bba1c8-78c7-44f4-83d8-85b292c065e5"><h1>Files</h1><p>Header and source file names must match the name of the class that the files define. Hence, each set of .h and .C files should contain code for a single class. Helper classes or classes not exposed to the user are an exception to this rule.</p><ul class="browser-default"><li><p>src/ClassName.C </p></li><li><p>include/ClassName.h</p></li></ul><p><a href="---" data-tooltip="---" data-position="top" class="tooltipped"></a></p></section><section data-section-text="Naming" data-section-level="1" id="b5ad623f-c9ca-4fed-9b0e-9b13350f6724"><h1>Naming</h1><ul class="browser-default"><li><p><code>ClassName</code> Class names utilize camel case, note the .h and .C filenames must match the class name. </p></li><li><p><code>methodName()</code> Method and function names utilize camel case with the leading letter lower case. </p></li><li><p><code>_member_variable</code> Member variables begin with underscore and are all lower case and use underscore between words. </p></li><li><p><code>local_variable</code> Local variables are lowercase, begin with a letter, and use underscore between words</p></li></ul><p><a href="---" data-tooltip="---" data-position="top" class="tooltipped"></a></p></section><section data-section-text="Example   Code" data-section-level="1" id="867a7d10-898f-43b2-852d-817c1ec17056"><h1>Example Code</h1><p>Below is a sample that covers many (not all) of our code style conventions. Note that clang-format ultimately will format your code so use this example only as a guide.</p><pre><code class="language-C++">
namespace moose // lower case namespace names
{
// don't add indentation level for namespaces

int // return type should go on separate line
junkFunction()
{
  // indent two spaces!
  if (name == &quot;moose&quot;) // space after the control keyword &quot;if&quot;
  {
    // Spaces on both sides of '&amp;' and '*'
    SomeClass &amp; a_ref;
    SomeClass * a_pointer;
  }

  // Omit curly braces for single statements following an if
  // The statement must be on its own line
  // Note: DO NOT omit curly braces for multiline blocks underneath an if statement
  if (name == &quot;squirrel&quot;)
    doStuff();
  else
    doOtherStuff();

  // No curly braces for single statement branches and loops
  // Note: DO NOT omit curly braces for multiline blocks underneath a for statement
  for (unsigned int i = 0; i &lt; some_number; ++i) // space after control keyword &quot;for&quot;
    doSomething();

  // space around assignment operator
  Real foo = 5.0;

  switch (stuff) // space after the control keyword &quot;switch&quot;
  {
    // Indent case statements
    case 2:
      junk = 4;
      break;
    case 3:
    { // Only use curly braces if you have a declaration in your case statement
      int bar = 9;
      junk = bar;
      break;
    }
    default:
      junk = 8;
  }

  while (--foo) // space after the control keyword &quot;while&quot;
    _console &lt;&lt; &quot;Count down &quot; &lt;&lt; foo; // Normally you will print to the _console (not std::cout).
}

// (short) function definitions on a single line
SomeClass::SomeFunc() {}

// Constructor initialization lists can all be on the same line.
SomeClass::SomeClass() : member_a(2), member_b(3) {}

// Four-space indent and one item per line for long (i.e. won't fit on one line) initialization list.
SomeOtherClass::SomeOtherClass()
  : member_a(2),
    member_b(3),
    member_c(4),
    member_d(5),
    member_e(6),
    member_f(7),
    member_g(8),
    member_h(9)
{ // braces on separate lines since func def is already longer than 1 line
}

} // namespace moose
</code></pre><p><a href="---" data-tooltip="---" data-position="top" class="tooltipped"></a></p></section><section data-section-text="Using   auto" data-section-level="1" id="1ba48531-525a-48f3-a216-ec261dacca16"><h1>Using auto</h1><p>Use <code>auto</code> for most new code unless it complicates readability. Make sure your variables have <strong>good</strong> names when using auto!</p><pre><code class="language-C++">
  auto dof = elem-&gt;dof_number(0, 0, 0);
  auto &amp; obj = getSomeObject();
  auto &amp; elem_it = mesh.active_local_elements_begin();
  auto &amp; item_pair = map.find(some_item);

  // Cannot use reference here
  for (auto it = obj.begin(); it != obj.end(); ++it)
    doSomething();

  // Use reference here
  for (auto &amp; obj : container)
    doSomething();
</code></pre><p>Do not use <code>auto</code> in any kind of function or method declaration</p><p><a href="---" data-tooltip="---" data-position="top" class="tooltipped"></a></p></section><section data-section-text="Lambdas" data-section-level="1" id="26e3b2bb-e998-4b3d-aa51-e21bec843dcd"><h1>Lambdas</h1><pre><code class="language-C++">
  // List captured variables (by value or reference) in the capture list explicitly where possible.
  std::for_each(container.begin(), container.end(), [=local_var](Foo &amp; foo) {
    foo.item = local_var;
  });
</code></pre><p><a href="---" data-tooltip="---" data-position="top" class="tooltipped"></a></p></section><section data-section-text="Other   C ++ 11   Notes" data-section-level="1" id="ef1e5394-8df3-45d0-9734-8653aaa3e442"><h1>Other C++11 Notes</h1><ul class="browser-default"><li><p>Use the <code>override</code> keyword on overridden <code>virtual</code> methods </p></li><li><p>Use <code>std::make_shared&lt;T&gt;()</code> when allocating new memory for shared pointers </p></li><li><p>Use <code>libmesh_make_unique&lt;T&gt;()</code> when allocating new memory for unique pointers </p></li><li><p>Make use of std::move() for efficiency when possible</p></li></ul><p><a href="---" data-tooltip="---" data-position="top" class="tooltipped"></a></p></section><section data-section-text="Variable   Initialization" data-section-level="1" id="5913c857-bd8e-4bf8-a03f-9447d74c2c13"><h1>Variable Initialization</h1><p>When creating a new variable use these patterns:</p><pre><code class="language-C++">
unsigned int i = 4;  // Built-in types
SomeObject junk(17); // Objects
SomeObject * stuff = new SomeObject(18); // Pointers
</code></pre><p><a href="---" data-tooltip="---" data-position="top" class="tooltipped"></a></p></section><section data-section-text="Trailing   Whitespace   and   Tabs" data-section-level="1" id="9f8fb951-9028-4e61-8388-6bdfbf23bada"><h1>Trailing Whitespace and Tabs</h1><p>MOOSE currently does not allow any trailing whitespace or tabs in the repository. If you are using our standard <a href="emacs" data-tooltip="emacs" data-position="top" class="tooltipped">Emacs</a> file this shouldn't be a problem. However, if you still end up with trailing whitespace that needs to be removed before a check-in. Try running the following one-liner from the appropriate directory:</p><pre><code class="language-bash">
  find . -name '*.[Chi]' -or -name '*.py' | xargs perl -pli -e 's/\s+$//'
</code></pre><p><a href="---" data-tooltip="---" data-position="top" class="tooltipped"></a></p></section><section data-section-text="Includes" data-section-level="1" id="567daa23-1f4a-4f79-8ae2-07e2d1a93034"><h1>Includes</h1><p>Firstly, only include things that are absolutely necessary in header files. Please use forward declarations when you can:</p><pre><code class="language-C++">
// Forward declarations
class Something;
</code></pre><p>All non-system includes should use quotes. There is a space between <code>include</code> and the filename.</p><pre><code class="language-C++">
#include &quot;LocalInclude.h&quot;
#include &quot;libmesh/libmesh_include.h&quot;

#include &lt;system_library&gt;
</code></pre><p><a href="---" data-tooltip="---" data-position="top" class="tooltipped"></a></p></section><section data-section-text="Documentation" data-section-level="1" id="5b36fc14-de98-4438-9ca3-f98fabd53d4e"><h1>Documentation</h1><ul class="browser-default"><li><p>Try to document as much as possible. </p></li><li><p>We suggest using the <a href="http://doxymacs.sourceforge.net" data-tooltip="http://doxymacs.sourceforge.net" data-position="top" class="tooltipped">Doxymacs</a> plugin to help with documenting. </p></li><li><p>Just put the .el files from the no-autoconf into your load-path and then add the hooks to load doxymacs-mode. </p></li><li><p>Use <code>C-c d f</code> before a function/class to auto generate a comment template</p></li></ul><p><a href="---" data-tooltip="---" data-position="top" class="tooltipped"></a></p><pre><code class="language-C++">
/**
 * The Kernel class is responsible for calculating the residuals for various
 * physics.
 *
 */
class Kernel
{
public:
  /**
   * This constructor should be used most often.  It initializes all internal
   * references needed for residual computation.
   *
   * @param system The system this variable is in
   * @param var_name The variable this Kernel is going to compute a residual for.
   */
  Kernel(System * system, std::string var_name);

  /**
   * This function is used to get stuff based on junk.
   *
   * @param junk The index of the stuff you want to get
   * @return The stuff associated with the junk you passed in
   */
  int returnStuff(int junk);

protected:
  /// This is the stuff this class holds on to.
  std::vector&lt;int&gt; stuff;
};
</code></pre><p><a href="---" data-tooltip="---" data-position="top" class="tooltipped"></a></p></section><section data-section-text="Python" data-section-level="1" id="90d45eea-7ca9-4c69-aaef-8ff774bb2547"><h1>Python</h1><p>Where possible, follow the above rules for Python. The only modifications are:</p><ol start="1" class="browser-default"><li><p>Four spaces are used for indenting and </p></li><li><p>Member variables should be names as follows:</p></li></ol><pre><code class="language-python">
class MyClass:
    def __init__(self):
        self.public_member
        self._protected_member
        self.__private_member
</code></pre><p><a href="---" data-tooltip="---" data-position="top" class="tooltipped"></a></p></section><section data-section-text="Code   Commandments" data-section-level="1" id="efef0af3-47dc-4121-b547-b09a996a99ed"><h1>Code Commandments</h1><ul class="browser-default"><li><p>Use references instead of pointers whenever possible  - i.e., this object lives for a shorter period of time than the object it needs to refer to does </p></li><li><p>Methods should return pointers to objects if returned objects are stored as pointers and references if returned objects are stored as references </p></li><li><p>When creating a new class:  - Include dependent header files in the *.C file whenever possible (i.e. the header uses only references or pointers in it's various declarations) and use forward declarations in the header file as needed  - One exception is when doing so would require end users to include multiple files to complete definitions of child objects (Errors typically show up as "incomplete class" or something similar during compilation) </p></li><li><p>Avoid using a global variable when possible. </p></li><li><p>Every destructor must be virtual. </p></li><li><p>All function definitions should be in *.C files.  - The only exceptions are for inline functions for speed and templates. </p></li><li><p>Thou shall not commit accidental insertion in a std::map by using brackets in a RHS operator unless he/she can prove it can't fail.</p></li></ul></section></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"></ul></div></div></div></div></main></div></body></html>