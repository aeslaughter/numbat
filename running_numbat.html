<!DOCTYPE html><html><head><meta charset="UTF-8"><link media="screen,projection" href="contrib/materialize/materialize.min.css" type="text/css" rel="stylesheet"></link><link href="contrib/katex/katex.min.css" type="text/css" rel="stylesheet"></link><link href="contrib/prism/prism.min.css" type="text/css" rel="stylesheet"></link><link href="css/moose.css" type="text/css" rel="stylesheet"></link><script src="contrib/jquery/jquery.min.js" type="text/javascript"></script><script src="contrib/materialize/materialize.min.js" type="text/javascript"></script><script src="contrib/clipboard/clipboard.min.js" type="text/javascript"></script><script src="contrib/prism/prism.min.js" type="text/javascript"></script><script src="contrib/katex/katex.min.js" type="text/javascript"></script><script src="contrib/fuse/fuse.min.js" type="text/javascript"></script><script src="js/search_index.js" type="text/javascript"></script><script src="js/init.js" type="text/javascript"></script><title>Running   the   Numbat   application|Numbat</title><script src="contrib/plotly/plotly.min.js" type="text/javascript"></script></head><body><div class="page-wrap"><header><nav><div class="nav-wrapper container"><a href="https://github.com/cpgr/numbat" class="right"><img src="media/github-logo.png" class="github-mark"></img><img src="media/github-mark.png" class="github-logo"></img></a><a href="http://cpgr.github.io/numbat/" class="left moose-logo">Numbat</a><ul class="right hide-on-med-and-down" id="nav-mobile"><li><a data-constrainWidth="false" href="#!" class="dropdown-button" data-activates="2b761e81-9ba3-4dea-8fcd-53e4e9619526">Getting Started<i class="material-icons right">arrow_drop_down</i></a></li><li><a data-constrainWidth="false" href="#!" class="dropdown-button" data-activates="53a1a69d-185c-4257-889e-9ebecf6dc418">Theory<i class="material-icons right">arrow_drop_down</i></a></li><li><a data-constrainWidth="false" href="#!" class="dropdown-button" data-activates="db4b5f3c-49c0-4dfe-8a37-e7636b42c320">Details<i class="material-icons right">arrow_drop_down</i></a></li><li><a data-constrainWidth="false" href="#!" class="dropdown-button" data-activates="151524aa-7c6e-4723-83cd-7da534feac46">Examples<i class="material-icons right">arrow_drop_down</i></a></li><li><a data-constrainWidth="false" href="#!" class="dropdown-button" data-activates="52f865e7-f9c3-4229-9c9b-2dd05f540421">Manual<i class="material-icons right">arrow_drop_down</i></a></li></ul><ul class="dropdown-content" id="2b761e81-9ba3-4dea-8fcd-53e4e9619526"><li><a href="getting_started.html">Installation</a></li></ul><ul class="dropdown-content" id="53a1a69d-185c-4257-889e-9ebecf6dc418"><li><a href="introduction.html">Introduction</a></li><li><a href="governing_equations.html">Governing equations</a></li></ul><ul class="dropdown-content" id="db4b5f3c-49c0-4dfe-8a37-e7636b42c320"><li><a href="implementation.html">Implementation</a></li><li><a href="input_file_syntax.html">Input file syntax</a></li><li><a href="running_numbat.html">Running Numbat</a></li><li><a href="systems.html">Available objects</a></li></ul><ul class="dropdown-content" id="151524aa-7c6e-4723-83cd-7da534feac46"><li><a href="example2D.html">2D</a></li><li><a href="example3D.html">3D</a></li></ul><ul class="dropdown-content" id="52f865e7-f9c3-4229-9c9b-2dd05f540421"><li><a href="download.html">User manual</a></li></ul><a href="#moose-search" class="modal-trigger"><i class="material-icons">search</i></a></div></nav><div class="modal modal-fixed-footer moose-search-modal" id="moose-search"><div class="modal-content container moose-search-modal-content"><div class="row"><div class="col l12"><div class="input-field"><input autocomplete="off" onkeyup="mooseSearch()" type="text" id="moose-search-box"><label for="search">http://cpgr.github.io/numbat/</label></input></div></div><div><div class="col s12" id="moose-search-results"></div></div></div></div><div class="modal-footer"><a href="#!" class="modal-action modal-close btn-flat">Close</a></div></div></header><main class="main"><div class="container"><div class="row"><div class="col hide-on-med-and-down l12"><nav class="breadcrumb-nav"><div class="nav-wrapper"><a href="running_numbat.html" class="breadcrumb">running_numbat</a></div></nav></div></div><div class="row"><div class="moose-content col s12 m12 l10"><section data-section-text="Running   the   Numbat   application" data-section-level="1" id="1c2a06d8-eba9-4d13-b1f6-fa94190b3c60"><h1>Running the Numbat application</h1><section class="scrollspy" data-section-text="Commandline" data-section-level="2" id="1b6a071c-99bd-4abc-a0dd-93fbcb052878"><h2>Commandline</h2><p>Most often, Numbat will be run from the commandline using</p><pre><code class="language-bash">
./numbat-opt -i input.i
</code></pre><p>Numbat (and all MOOSE applications) have a large number of commandline options available to the user. The complete list can be viewed using the <code>--help</code> option</p><pre><code class="language-bash">
./numbat-opt --help
</code></pre><section data-section-text="Recovering" data-section-level="3" id="cabbcd68-9d6f-4823-9474-70c849a13559"><h3>Recovering</h3><p>If you output checkpoint files (using <code>checkpoint = true</code> in your Outputs block) then the <code>--recover</code> option will allow you to continue a solve that died in the middle of the solve, perhaps because the job ran out of time on the cluster you were using.</p><p>We recommend that all input files for large Numbat simulations enable checkpointing. This can be enabled using</p><div class="card"><div class="card-content"><pre style="max-height:350px;"><code class="language-text">
[Outputs]
  [./console]
    type = Console
    perf_log = true
    output_nonlinear = true
  [../]
  [./csvoutput]
    type = CSV
    file_base = 2DSF
    execute_on = 'INITIAL TIMESTEP_END'
  [../]
  [./checkpoint]
    type = Checkpoint
    num_files = 2
  [../]
[]</code></pre><a data-position="top" href="#3c3de75e-acd1-429a-b055-3271a7b4db12" class="tooltipped modal-trigger" data-tooltip="/Users/gre462/Documents/MOOSE/projects/numbat/tests/2D/2DSF_recover.i">(tests/2D/2DSF_recover.i)</a></div></div><p>For all of the options available for checkpointing, see the <a class="tooltipped" href="http://www.mooseframework.org" data-tooltip="http://www.mooseframework.org" data-position="top">MOOSE</a> documentation.</p><p>If a long-running simulation does fail to complete, it can be recovered by running</p><pre><code class="language-bash">
./numbat-opt --recover checkpoint_dir/XXXX -i input.i
</code></pre><p>where <code>checkpoint_dir</code> is the subdirectory where the checkpoint files are saved, and <code>XXXX</code> is the number of one of the available checkpoint files.</p></section><section data-section-text="Overriding   parameters" data-section-level="3" id="6a6f93cf-a02d-43b1-9935-8ade2d0a3113"><h3>Overriding parameters</h3><p>MOOSE provides a handy feature where any parameter in the input file can be overridden from the commandline, making it possible to script studies where only parameters are changed from simulation to simulation.</p><p>For example, assume that the anisotropy <code>gamma</code> of the porous medium is set as <code>1</code> in the input file</p><pre><code class="language-text">
[Kernels]
  [./Darcy]
    type = NumbatDarcySF
    variable = streamfunction
    concentration = concentration
    gamma = 1
  [../]
[]
</code></pre><p>This value can be changed to <code>0.5</code> by running Numbat with the following commandline option</p><pre><code class="language-bash">
./numbat-opt -i input.i Kernels/Darcy/gamma=0.5
</code></pre></section></section><section class="scrollspy" data-section-text="Graphical   user   interface   ( Peacock )" data-section-level="2" id="625a6594-3066-479e-bd5d-b55379a04c4a"><h2>Graphical user interface (Peacock)</h2><p>MOOSE provides a graphical user interface, Peacock, which can be used to both run simulations and create input files. Starting Peacock from within the base Numbat directory allows Peacock to extract the Numbat syntax, so that all Numbat objects are available in the menus.</p><div class="card moose-alert moose-alert-note"><div class="card-content"><div class="moose-alert-title card-title"><span class="moose-alert-title-brand">note</span></div><div class="moose-alert-content"><p>It is not recommended to use Peacock to run very large models (e.g. three dimensional simulations)</p></div></div></div></section></section></div><div class="col hide-on-med-and-down l2"><div class="toc-wrapper pin-top"><ul class="section table-of-contents"><li><a data-delay="1000" data-position="left" href="#1b6a071c-99bd-4abc-a0dd-93fbcb052878" class="tooltipped" data-tooltip="Commandline">Commandline</a></li><li><a data-delay="1000" data-position="left" href="#625a6594-3066-479e-bd5d-b55379a04c4a" class="tooltipped" data-tooltip="Graphical   user   interface   ( Peacock )">Graphical   user   interface   ( Peacock )</a></li></ul></div></div></div></div></main></div><div id="3c3de75e-acd1-429a-b055-3271a7b4db12" class="modal bottom-sheet"><div class="modal-content"><h4>/Users/gre462/Documents/MOOSE/projects/numbat/tests/2D/2DSF_recover.i</h4><pre><code class="language-text">[Mesh]
  type = GeneratedMesh
  dim = 2
  ymin = -100
  ymax = 0
  ny = 20
  nz = 0
  bias_y = 0.75
[]

[Variables]
  [./concentration]
    order = FIRST
    family = LAGRANGE
    initial_condition = 0.0
  [../]
  [./streamfunction]
    order = FIRST
    family = LAGRANGE
    initial_condition = 0.0
  [../]
[]

[Kernels]
  [./Darcy]
    type = NumbatDarcySF
    variable = streamfunction
    concentration = concentration
  [../]
  [./Convection]
    type = NumbatConvectionSF
    variable = concentration
    streamfunction = streamfunction
  [../]
  [./Diffusion]
    type = NumbatDiffusionSF
    variable = concentration
  [../]
  [./TimeDerivative]
    type = TimeDerivative
    variable = concentration
  [../]
[]

[AuxVariables]
  [./u]
    order = CONSTANT
    family = MONOMIAL
  [../]
  [./w]
    order = CONSTANT
    family = MONOMIAL
  [../]
[]

[AuxKernels]
  [./uAux]
    type = NumbatDarcyVelocitySF
    variable = u
    component = x
    streamfunction = streamfunction
  [../]
  [./wAux]
    type = NumbatDarcyVelocitySF
    variable = w
    component = y
    streamfunction = streamfunction
  [../]
[]

[BCs]
  [./conctop]
    type = DirichletBC
    variable = concentration
    boundary = top
    value = 1.0
  [../]
  [./streamfuntop]
    type = DirichletBC
    variable = streamfunction
    boundary = top
    value = 0.0
  [../]
  [./streamfunbottom]
    type = DirichletBC
    variable = streamfunction
    boundary = bottom
    value = 0.0
  [../]
  [./Periodic]
    [./x]
      variable = 'concentration streamfunction'
      auto_direction = x
    [../]
  [../]
[]

[Executioner]
  type = Transient
  end_time = 100
  solve_type = PJFNK
  petsc_options_iname = '-ksp_type -pc_type -pc_sub_type'
  petsc_options_value = 'gmres asm lu'
[]

[Postprocessors]
  [./boundary_flux]
    type = NumbatSideFluxSF
    variable = concentration
    boundary = top
  [../]
  [./total_mass]
    type = NumbatTotalMassSF
    variable = concentration
  [../]
[]

[Preconditioning]
  [./smp]
    type = SMP
    full = true
  [../]
[]

[Outputs]
  [./console]
    type = Console
    perf_log = true
    output_nonlinear = true
  [../]
  [./csvoutput]
    type = CSV
    file_base = 2DSF
    execute_on = 'INITIAL TIMESTEP_END'
  [../]
  [./checkpoint]
    type = Checkpoint
    num_files = 2
  [../]
[]
</code></pre></div></div></body></html>